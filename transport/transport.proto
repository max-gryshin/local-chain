syntax = "proto3";

service LocalChain {
  rpc AddPeer(AddPeerRequest) returns (AddPeerResponse) {}
  rpc RemovePeer(RemovePeerRequest) returns (RemovePeerResponse) {}
  rpc AddVoter(AddVoterRequest) returns (AddVoterResponse) {}
  rpc AddTransaction(AddTransactionRequest) returns (AddTransactionResponse) {}
  rpc GetBalance(GetBalanceRequest) returns (GetBalanceResponse) {}

  rpc AddUser(AddUserRequest) returns (AddUserResponse) {}
  rpc GetUser(GetUserRequest) returns (GetUserResponse) {}
  rpc ListUsers(ListUsersRequest) returns (ListUsersResponse) {}
}

message AddPeerRequest {
  string id = 1;
  string address = 2;
}

message AddPeerResponse {
  bool success = 1;
}

message RemovePeerRequest {
  string id = 1;
  string address = 2;
}

message RemovePeerResponse {
  bool success = 1;
}

message AddVoterRequest {
  string id = 1;
  string address = 2;
}

message AddVoterResponse {
  bool success = 1;
}

message AddTransactionRequest {
  bytes sender = 1;
  bytes receiver = 2;
  Amount amount = 3;
}

message GetBalanceRequest {
  bytes sender = 1;
}

message GetBalanceResponse {
    Amount amount = 1;
}

message AddTransactionResponse {
  bool success = 1;
}

message Amount {
  uint64 value = 1;
  uint32 unit = 2;
}

message Utxo {
  bytes txHash = 1;
  uint32 index = 2;
}

message AddUserRequest {
  User user = 1;
}

message GetUserRequest {
  string username = 1;
}

message ListUsersRequest {}

message AddUserResponse {
  bool success = 1;
}

message GetUserResponse {
  User user = 1;
}

message ListUsersResponse {
  repeated User users = 1;
}

message User {
  bytes publicKey = 1;
  bytes privateKey = 2;
  string username = 3;
}
